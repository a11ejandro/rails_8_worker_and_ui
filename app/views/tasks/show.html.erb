<h1>Task Details</h1>

<%= link_to 'Back to Tasks', tasks_path %>

<table>
  <tr><th>ID</th><td><%= @task.id %></td></tr>
  <tr><th>Name</th><td><%= @task.name %></td></tr>
  <tr><th>Page</th><td><%= @task.page %></td></tr>
  <tr><th>Per Page</th><td><%= @task.per_page %></td></tr>
  <tr><th>Created At</th><td><%= @task.created_at.strftime('%Y-%m-%d %H:%M:%S') %></td></tr>
</table>

<div style="display:flex; gap: 8px; align-items:center; margin: 8px 0;">
  <%= link_to 'Enqueue Ruby Runs', enqueue_ruby_runs_task_path(@task), data: { turbo_method: :post }, class: 'btn btn-success' %>
  <%= link_to 'Enqueue Go Runs', enqueue_go_runs_task_path(@task), data: { turbo_method: :post }, class: 'btn btn-secondary' %>
</div>

<h2>Statistical Box Charts</h2>
<div class="box-chart">
  <div class='box'>
    <h3>Duration, seconds</h3>
    <div data-duration='<%= @task.statistics_by_metric['duration'].to_json %>'></div>
  </div>

  <div class='box'>
    <h3>Memory, Kb </h3>
    <div data-memory='<%= @task.statistics_by_metric['memory'].to_json %>'></div>
  </div>
</div>

<%= stylesheet_link_tag 'application', media: 'all' %>
<%= javascript_import_module_tag 'box_chart' %>
